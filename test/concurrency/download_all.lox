namespace test.concurrency;
using clox.std.net.HTTPClient;
using clox.std.util.Promise;

val client = HTTPClient();
print("Initializing HTTP Client: ");
println(client);
println("");

println("Downloading sample files: ");
val promise = client.downloadAsync("https://filesamples.com/samples/document/txt/sample1.txt", "test/others/file_downloaded_1.txt");
val promise2 = client.downloadAsync("https://filesamples.com/samples/document/txt/sample2.txt", "test/others/file_downloaded_2.txt");
val promise3 = client.downloadAsync("https://filesamples.com/samples/document/txt/sample3.txt", "test/others/file_downloaded_3.txt");
await Promise.all([promise, promise2, promise3]);

println("Successfully downloaded all 3 files.");
println("");
println("Closing HTTP Client... ");
client.close();